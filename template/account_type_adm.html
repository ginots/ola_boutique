<!DOCTYPE html>
{% load static %}
<html lang="en">


{% include "navbar.html" %}


    <div class="container mt-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="fw-bold text-primary mb-0"><!--Manage--> Account Types</h3>
        <div>
          <a href="{% url 'index' %}" class="btn btn-outline-secondary me-2 mb-2 mb-md-0">← Home</a>

          <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addModal">+ Add New</button>

        </div>
      </div>


      <div class="table-responsive">
        <table class="table table-bordered table-striped align-middle">
          <thead class="table-dark text-dark">
            <tr>
              <th>#</th>
              <th>Account Type</th>

              <th>Actions</th>

            </tr>
          </thead>
          <tbody>
            {% for type in account_types %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ type.account_type }}</td>

              <td>
                <a href="{% url 'edit_account_type_adm' type.id %}" class="btn btn-sm btn-primary">Edit</a>
                <a href="{% url 'delete_account_type_adm' type.id %}" class="btn btn-sm btn-danger"
                   onclick="return confirm('Are you sure you want to delete this account type?');">Delete</a>
              </td>

            </tr>
            {% empty %}
            <tr><td colspan="3" class="text-center text-muted">No account types found.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Modal for Add New Account Type -->
    <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="addModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <form method="POST" action="{% url 'account_type_adm' %}">
            {% csrf_token %}
            <div class="modal-header">
              <h5 class="modal-title">Add New Account Type</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <input type="text" name="account_type" class="form-control" placeholder="Enter account type" required>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-success">Save</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
</div>
        <!-- Content End -->



    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'lib/chart/chart.min.js' %}"></script>
    <script src="{% static 'lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'lib/tempusdominus/js/moment.min.js' %}"></script>
    <script src="{% static 'lib/tempusdominus/js/moment-timezone.min.js' %}"></script>
    <script src="{% static 'lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js' %}"></script>

    <!-- Template Javascript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script>
        document.querySelectorAll("form").forEach(function(form) {

            form.addEventListener("keydown", function(e) {

                if (e.key === "Enter" && !e.ctrlKey &&
                    (e.target.tagName === "INPUT" || e.target.tagName === "TEXTAREA")) {

                    e.preventDefault();

                    let fields = Array.from(
                        form.querySelectorAll("input:not([type=hidden]):not([readonly]), textarea")
                    );

                    let index = fields.indexOf(e.target);

                    if (fields[index + 1]) {
                        fields[index + 1].focus();
                        fields[index + 1].select?.();
                    }
                }

                // CTRL + ENTER → Submit form
                if (e.key === "Enter" && e.ctrlKey) {
                    form.submit();
                }

            });

        });
    </script>
</body>
</html>